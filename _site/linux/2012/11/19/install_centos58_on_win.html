<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Win7下安装CentOS 5.8双系统</title>
	
	<meta name="author" content="chunleiyang">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
  <link rel="shortcut icon" href="/assets/ico/favicon.ico">
  <link rel="apple-touch-icon" href="/assets/ico/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/ico/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/ico/apple-touch-icon-114-precomposed.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/chunleiyang">
				<i class="fa fa-github"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="http://twitter.com/chunleiyang">
				<i class="fa fa-twitter"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:yclhit@gmail.com">
				<i class="fa fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="/">
				<img src="http://www.gravatar.com/avatar/726351295ec82e145928582f595aa3aa?s=35" class="img-circle" />
				
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/categories.html">Categories</a></li>
				<li><a href="/tags.html">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
  <!--
  <div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>
  -->

	<div class="col-sm-3 sidebar hidden-xs">
		<! -- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/">
    <!--<img src="http://www.gravatar.com/avatar/726351295ec82e145928582f595aa3aa?s=150" class="img-circle" />-->
		<img src="/assets/media/ycl.jpg" class="img-circle" />
	</a>
	<h3 class="title">
        <a href="/"></a>
    </h3>
</header>


<ul class="nav navbar-nav">
	<li class="active"><a href="/">Home</a></li>
	<li><a href="/categories.html">Categories</a></li>
	<li><a href="/tags.html">Tags</a></li>
</ul>


<div id="bio" class="text-center">
	Just Do It!
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/chunleiyang">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="http://weibo.com/yclhit">
				<i class="fa fa-pinterest fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:yclhit@gmail.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://twitter.com/chunleiyang">
				<i class="fa fa-twitter fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://linkedin.com/pub/asd123">
				<i class="fa fa-linkedin fa-lg"></i>
			</a>
		</li>
		
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>
<! -- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
  <h1>Win7下安装CentOS 5.8双系统 </h1>
</div>
	
<article>

	<div class="col-sm-10">
	 <span class="post-date">
	   
	   November 
	   19th,
	   
	   2012
	 </span>
	  <div class="article_body">
	  <p>  上周末看到自己的机器跑的也慢了，再加上不想在虚拟机下学linux了，因此，想装个双系统，看到鸟哥的私房菜是在CentOS 5.X下进行演示，索性就装个CentOS吧，在这里装的是CentOS的5.8版本CentOS 5.8，下载 <em>CentOS-5.8-i386-bin-DVD-1of2.iso</em> 和 <em>CentOS-5.8-i386-bin-DVD-1of2.iso</em> 这个两个镜像。  </p>

<p>  在这里先插入一段小插曲，就是安装win7的时候出现了让人郁闷的事情，我是分了四个区，win7安装在C盘，装完之后，发现所有分区都是动态类型的，如果只用win7一个系统那么没什么关系的其实，但是要装双系统就不能是动态类型，然后就重装了下win7，但是到分区那一步的时候发现居然不能操作，无法删除也无法格式化，然后查了下资料，方法就是，在分区那一步，按 <code>shift+F10</code> 调出dos命令提示符窗口，分别执行以下操作：  </p>

<ol>
  <li>键入 <code>diskpart</code> 命令，进入diskpart环境;</li>
  <li>键入 <code>list disk</code> 命令，列出本机所有磁盘;</li>
  <li>键入 <code>select disk 0</code> 命令，选择第一个磁盘;</li>
  <li>键入 <code>clean</code> 命令，清除分区。</li>
</ol>

<p>  到这一步其实事情已经解决了，你在返回分区界面刷新一下就能看到效果了，在这里如果想灵活的分出主分区和逻辑分区，在dos diskpart命令环境下很方便的，比如 <code>create primary partition size=51200</code> 创建一个大小为50G的主分区，然后用 <code>active</code> 命令激活，再比如 <code>create partition extended</code> 命令创建扩展分区等。在这里我我分了四个分区，一个主分区，三个逻辑分区，最后一个分区F盘大小为60G准备安装我的CentOS。好了，插曲就到这里，下面看看CentOS的安装方法：  </p>

<ul>
  <li>首先准备启动盘</li>
</ul>

<p>  启动盘可以是U盘、硬盘和光盘，用U盘和光盘制作启动镜像来安装应该是最简单的方式，但是本人手边木有那么大的U盘也没有一张光盘，就选择用硬盘安装。首先用分区工具 Acronis Disk Director Suite 从E盘分出5G空间用来存放CentOS安装文件，为方便起见，在这里称其为”安装分区“，但是linux只识别ext2/ext3/ext4或者fat32这样的文件系统，因此不能划分完就完事了，我们知道windows也识别fat32文件系统，因此将”安装分区“格式化为fat32系统，其实这里还有个问题，那就是fat32系统只识别4G以下的文件，如果你的CentOS镜像大于4G了那么就不能放在fat32文件系统下面，你要将其格式化ext3等linux识别的文件系统，再用Ext2Fs这样的工具去把安装镜像放到里面，如果不用这个工具的话windows是不识别ext文件系统的，更别说把文件拷进去了。再说说这里为什么可以用fat32文件系统，我们看到我们下载下来的安装文件有两个iso，第一个是3G多不到4G，第二个不到1G，但是加一起就大于4G了，但是没关系，单个文件小于4G就OK。再用UltraISO将 <em>CentOS-5.8-i386-bin-DVD-1of2.iso</em>中的<em>isolinux/vmlinuz</em> 和 <em>isolinux/initrd.img</em> 以及<em>imgs</em> 放到我们刚刚划分好的”安装分区”里面，最后”安装分区”里面应该有5个文件，分别是 <em>CentOS-5.8-i386-bin-DVD-1of2.iso</em>、<em>CentOS-5.8-i386-bin-DVD-2of2.iso</em>、<em>vmlinuz</em>、<em>initrd.img</em>和<em>imgs</em>，如果只放<em>DVD1</em>可能会让你在最后快完成安装的时候喷血，会提示镜像找不到的错误。OK，到这里我们的启动盘准备完成。</p>

<ul>
  <li>添加启动菜单</li>
</ul>

<p>  下载并安装<em>EasyBCD</em>来为我们刚刚做的启动盘添加一个启动项以便进入安装环节。打<em>开EasyBCD</em>，<em>AddNewEntry-&gt;Install-&gt;Config</em>，这时会弹出一个<em>txt</em>文件，这个文件其实就是<em>menulist</em>文件，在其中键入如下值：  </p>

<blockquote>
  <p>title CentOS 5.8<br />
kernel  (hd0,6)/vmlinuz<br />
initrd  (hd0,6)/initrd.img  </p>
</blockquote>

<p>  保存并退出。  </p>

<p>  在这里，解释一下<em>menulist</em>中的这些东西。title后面的内容只是一个标题，写错写对无伤大雅，下面的kernel和initrd后面其实是vmlinuz和initrd.img的路径，不管你的本的磁盘接口是IDE的还是SATA的都是以hd来标记，比如hd0表示你的第一个磁盘，括号内的第二个数字表示对应的磁盘上的分区号，在这里要写对应的”安装分区“的分区号，我的本上的分区是这样的一个主分区C盘，两个逻辑分区D盘和E盘，后面是一个刚刚从C盘剥离出来的”安装分区“以及最后的一个F盘，由于分区号0~3是给主分区或者可扩展分区的，因此这里C盘的分区号就是0，D、E、”安装分区“、F分别是4、5、6、7。这个别写错了，否则在安装的时候会因为找不见vmlinuz和initrd.img文件而失败。OK，到这里我们已经给我们的启动盘添加了启动项，接下来重启选择第二个菜单进入安装。  </p>

<ul>
  <li>安装CentOS5.8</li>
</ul>

<p>  这个环节基本上就是一路”next“的节奏，稍微注意一下的是在选择安装文件的时候要选择sd7否则会找不着安装文件，其实这个没什么，实在不知道自己的安装文件丢到那个分区里了就挨个试一试，总有一个会成功的。再就是最重要的分区，在这里选择”建立自定义的分区结构“，点”确定“，这时候我们会在上面区域看到我们的磁盘分区情况，我是想装在F盘，但是这个分区是在装win7的时候分出来的，是NTFS文件系统，因此我们在这里首先要删除这个分区，这时候会看到Free后面跟一个代表大小的数字，OK，我们就从这个free里面为我们的linux分区。在这里分四个区，分别是/、/boot、/home、swap区，由于我预先留出来的空间比较大有60G，因此在这里给/根区分20G，给/boot分200M，给swap分4G，剩下的全分给/home。好了，这些步骤都完成后，我就分好区了，接下来还有一个一定要注意的地方，那就是安装引导装载程序grub，我们要把它安装在MBR上才能进行引导，其实默认也是安装在MBR里头的，/dev/hda就代表了那块硬盘的MBR，下面有个列表区域，就是你开机时候出现的菜单。  </p>

<ul>
  <li>关于引导的一些问题</li>
</ul>

<p>  安装完后重启，默认引导是由grub来引导的，默认的系统是CentOS，但是如果我们在大部分时间内用的是windows的话这样很不方便，因此建议进入CentOS系统后，切换到root用户，然后gedit /etc/grub.conf，然后将default=0改为default=1就会默认启动windows。至此，已经大功告成了，开始你的CentOS吧。  </p>

<ul>
  <li>其他</li>
</ul>

<p>  到这一步，按理应该是在玩windows或者CentOS才对，可是我却干了一件麻烦事。切换到win7的时候我们会看到我们一开始制作的那个”安装分区“，就5G摆在那里总觉得别扭，然后我手闲闲的将其和邻近的E盘合并了，一切看起来似乎很完美，但当我再次重启想进CentOS时发现没能正常启动grub，出现的是一个grub命令提示符，其实这个原因是因为你把一个分区与另一个分区合并之后，那个被合并的分区之后的所有分区的编号都减一了，而你在/etc/grub.conf的root (hd0,7)就不在适用了，应该改为(hd0,6) 才对，这里的root命令用来设定/boot分区的，因为没合并那两个分区前，有C、D、E、”安装分区“、/boot、/、/home、/swap，因此，/boot就是(hd0,7)，但是合并了E盘和”安装分区“后，/boot的编号应该为(hd0,6)才对。OK，在grub命令提示符下键入以下命令：  </p>

<ol>
  <li>setup (hd0)  //重新安装grub在MBR上</li>
  <li>reboot  //重启</li>
</ol>

<p>  这时候还是会出现grub命令提示符，这是肯定的，因为我们并没有修改gurb.conf文件，现在就来做这件事：  </p>

<ol>
  <li>root (hd0,6)  //设定/boot分区</li>
  <li>kernel /vmlinuz-2.6.18.308.e15 ro root=LABEL=/  rhgb quiet  //你可以用tab键补全</li>
  <li>initrd /initrd-2.6.18.308.e15.img  //你可以用tab键补全</li>
  <li>boot</li>
</ol>

<p>  OK，我们会看到我们的CentOS又可以顺利的启动了！进入之后，记得把/boot/grub/grub.conf进行修改，主要就是把/boot的分区号给对应上，我这里就是把(hd0,7)改为(hd0,6)。</p>

<ul>
  <li>最后，还要感谢我可爱的老婆陪着我 ^_^ 。</li>
</ul>

	  </div>

		
		<ul class="tag_box list-unstyled list-inline">
		  <li><i class="fa fa-folder-open"></i></li>
		  
		  
			 
				<li><a href="/categories.html#linux-ref">
					linux <span>(3)</span>
					
				</a></li>
			
		  
		</ul>
		  

		
		<ul class="list-inline">
		  <li><i class="fa fa-tags"></i></li>
		  
		  
			 
				<li>
					<a href="/tags.html#centos-ref">
					centos <span>(1)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags.html#double system-ref">
					double system <span>(1)</span>
					
					</a>
				</li>
			
		  
		  
		</ul>
		  

		<hr>
    <!--
		<div>
      <section class="share col-sm-6">
        <h4 class="section-title">Share Post</h4>
        <a class="btn btn-default btn-sm twitter" href="http://twitter.com/share?text=Win7下安装CentOS 5.8双系统&via=chunleiyang"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <i class="fa fa-twitter fa-lg"></i>
          Twitter
        </a>
        <a class="btn btn-default btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <i class="fa fa-facebook fa-lg"></i>
          Facebook
        </a>
        <a class="btn btn-default btn-sm gplus"
           onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
          <i class="fa fa-google-plus fa-lg"></i>
          Google+
        </a>
      </section>

      <section class="col-sm-6 author">
        <img src="http://www.gravatar.com/avatar/726351295ec82e145928582f595aa3aa" class="img-rounded author-image" />
        <h4 class="section-title author-name">chunleiyang</h4>
        <p class="author-bio">Just Do It!</p>
      </section>
    </div>
    -->

    <div class="clearfix"></div>

    <section class="comments" style="margin-top:15px;">
      <div id="disqus_thread"></div>
      <script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'chunlei'; // required: replace example with your forum shortname

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


 <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'chunlei'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
 

    </section>

		<ul class="pager">
		  
		  <li class="previous"><a href="/programming/2012/09/14/win32_sysdir_on_win64.html" title="win32程序在64位机器上读取system目录下文件失败">&larr; Previous</a></li>
		  
		  
		  <li class="next"><a href="/programming/2013/04/21/cpp-member-init.html" title="C++成员初始化">Next &rarr;</a></li>
		  
		</ul>

		<hr>
	</div>
	
	<div class="col-sm-2 sidebar-2">
	
	</div>
</article>
<div class="clearfix"></div>



		<footer>
			<hr/>
			<p>
				&copy; 2014 chunleiyang with Jekyll. Theme: <a href="https://github.com/dbtek/dbyll">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
</body>
</html>

